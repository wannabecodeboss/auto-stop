<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LED Control</title>
    <script type="module">
        // Import Firebase modules
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
        import { getDatabase, ref, onValue, set } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js";

        // Firebase Configuration
        const firebaseConfig = {
            databaseURL: "https://auto-hiteshi-default-rtdb.asia-southeast1.firebasedatabase.app/"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        const ledStatusRef = ref(db, "LED_Status");

        // Fetch LED Status from Firebase
        onValue(ledStatusRef, (snapshot) => {
            const status = snapshot.val();
            document.getElementById("ledStatus").innerText = status;
        });

        // Toggle LED Status
        window.toggleLED = function() {
            onValue(ledStatusRef, (snapshot) => {
                const currentStatus = snapshot.val();
                const newStatus = currentStatus === "ON" ? "OFF" : "ON";
                set(ledStatusRef, newStatus);
            }, { onlyOnce: true });
        };
    </script>
</head>
<body>
    <h1>LCar Stop Signal</h1>
    <p>LED Status: <span id="ledStatus">Loading...</span></p>
    <button onclick="toggleLED()">Toggle LED</button>
</body>
</html>
